webpackJsonp([1],{"6sO2":function(n,t,e){"use strict";function i(n,t){var e=n.x,i=n.z,o=t.x,a=t.z;return Math.abs(e-o)<1&&Math.abs(i-a)<1}function o(){document.querySelector("#retry-container").classList.remove("show"),f.resetStage(),v.reset(),y.resetPosition()}function a(n){requestAnimationFrame(a),p.render(d,w),y.render(),c.update(n)}Object.defineProperty(t,"__esModule",{value:!0});var s=e("VKDx"),r=(e.n(s),e("Ml+6")),c=e("pXIW"),l=(e.n(c),e("c9qc")),u=e("rtSL"),h=e("Q13Q"),p=new r.m({antialias:!0,alpha:!0,devicePixelRatio:window.devicePixelRatio}),d=new r.i,w=new r.h(70,window.innerWidth/window.innerHeight,.01,1e3);w.rotation.set(-.7853981633974484,.25919993750092757,.2509060767339454);var v=(new r.k(.2,0),new r.k(.2,1),new l.a),f=new u.a(w);f.resetStage();var y=new h.a(new r.a(.2),new r.e({color:0}));y.rotation.x=-Math.PI/2,y.position.copy(v.position),d.add(v,f,y),p.setPixelRatio(window.devicePixelRatio),p.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(p.domElement),p.domElement.addEventListener("touchstart",function(n){n.preventDefault(),!v.jumping&&v.alive&&(y.setTarget(v.position.clone(),f.getLastCubePosition().clone().setY(.25).sub(v.position.clone()).normalize()),y.startCharge())}),p.domElement.addEventListener("touchend",function(n){if(n.preventDefault(),y.running&&v.alive){y.stopCharge();var t=(v.position,y.position.clone());console.log(f),v.jumpByEndPosition(t,function(){!i(f.getLastCubePosition(),t)&&v.dead(),f.addCube.call(f)}).then(function(n){if(!n)return y.visible=!1,v.deadAnimation()}).then(function(){console.log("complete"),v.alive||document.querySelector("#retry-container").classList.add("show")})}}),requestAnimationFrame(a),document.querySelector("#retry-button").addEventListener("click",o)},Q13Q:function(n,t,e){"use strict";var i=e("Zx67"),o=e.n(i),a=e("Zrlr"),s=e.n(a),r=e("wxAW"),c=e.n(r),l=e("zwoO"),u=e.n(l),h=e("Pf15"),p=e.n(h),d=e("Ml+6"),w=function(n){function t(n,e){s()(this,t);var i=u()(this,(t.__proto__||o()(t)).call(this,n,e));return i.targetDirection=new d.l(1,0,0),i.running=!1,i.distance=0,i.chargeDirection=.05,i.startPosition=i.position.clone(),i}return p()(t,n),c()(t,[{key:"setTarget",value:function(n,t){this.startPosition.copy(n),this.position.copy(n),this.targetDirection.copy(t)}},{key:"startCharge",value:function(){this.running=!0,this.distance=1}},{key:"stopCharge",value:function(){this.running=!1}},{key:"render",value:function(){if(this.running){var n=this.startPosition.clone().add(this.targetDirection.setLength(this.distance));this.position.copy(n),this.distance+=this.chargeDirection}}},{key:"resetPosition",value:function(){this.position.set(0,.25,0),this.visible=!0}}]),t}(d.d);t.a=w},VKDx:function(n,t){},c9qc:function(n,t,e){"use strict";var i=e("//Fk"),o=e.n(i),a=e("Zx67"),s=e.n(a),r=e("Zrlr"),c=e.n(r),l=e("wxAW"),u=e.n(l),h=e("zwoO"),p=e.n(h),d=e("Pf15"),w=e.n(d),v=e("Ml+6"),f=e("pXIW"),y=(e.n(f),function(n){function t(){c()(this,t);var n=p()(this,(t.__proto__||s()(t)).call(this)),e=new v.g,i=[new v.k(.2,0),new v.k(.13,.8),new v.k(.2,1)],o=new v.d(new v.c(i,20),new v.f),a=new v.d(new v.a(.2),new v.f),r=new v.d(new v.a(.2),new v.f);a.rotation.x=-Math.PI/2,a.position.y=1,r.rotation.x=Math.PI/2,e.add(a,r,o);var l=new v.d(new v.j(.2),new v.f);return l.position.y=1.2,n.add(l,e),n.position.y=.25,n.tween=null,n.jumping=!1,n.alive=!0,n}return w()(t,n),u()(t,[{key:"jumpBySpeed",value:function(n,t){var e=this;if(!this.jumping){var i=2*t/.02,o=this.position.clone(),a=this.position.clone(),s=n?this.position.clone().sub(new v.l(0,0,t*i).multiplyScalar(.001)):this.position.clone().sub(new v.l(t*i,0,0).multiplyScalar(.001));this.tween=new f.Tween(a).to(s,i).onUpdate(function(){var s=a.clone().sub(o).length()/t*1e3,r=(t*s-.01*s*s)/1e3+.25;e.position.copy(a),e.position.y=r,e.rotation[n?"x":"z"]=2*Math.PI*s/i*(n?-1:1)}).start()}}},{key:"jumpByDistance",value:function(n,t){var e=this;if(!this.jumping){var i=this.position.clone(),o=this.position.clone(),a=n?this.position.clone().sub(new v.l(0,0,t)):this.position.clone().sub(new v.l(t,0,0));this.tween=new f.Tween(o).to(a,500).onUpdate(function(){var a=o.clone().sub(i).length()/t;e.position.copy(o);var s=-12*Math.pow(a-.5,2)+3.25;e.position.y=s,e.rotation[n?"x":"z"]=2*Math.PI*a*(n?-1:1)}).start()}}},{key:"jumpByEndPosition",value:function(n,t){var e=this;if(!this.jumping)return new o.a(function(i,o){var a=e.position.clone(),s=e.position.clone(),r=n,c=r.clone().distanceTo(a),l=r.clone().sub(a).normalize(),u=Math.abs(l.z)>Math.abs(l.x);e.tween=new f.Tween(s).to(r,500).onStart(function(){e.jumping=!0,t()}).onUpdate(function(){var n=s.clone().sub(a).length()/c;e.position.copy(s);var t=-12*Math.pow(n-.5,2)+3.25;e.position.y=t,e.rotation[u?"x":"z"]=2*Math.PI*n*(u?-1:1)}).onComplete(function(){e.jumping=!1,i(e.alive)}).start()})}},{key:"dead",value:function(){this.alive=!1}},{key:"deadAnimation",value:function(){var n=this;return new o.a(function(t,e){n.rotation.clone(),new f.Tween(n.position).to(new v.l(n.position.x,-.25,n.position.z),1e3).onComplete(function(){t()}).start()})}},{key:"reset",value:function(){this.alive=!0,this.position.set(0,.25,0)}}]),t}(v.g));t.a=y},rtSL:function(n,t,e){"use strict";var i=e("Gu7T"),o=e.n(i),a=e("Zx67"),s=e.n(a),r=e("Zrlr"),c=e.n(r),l=e("wxAW"),u=e.n(l),h=e("zwoO"),p=e.n(h),d=e("Pf15"),w=e.n(d),v=e("Ml+6"),f=e("pXIW"),y=(e.n(f),function(n){function t(n){c()(this,t);var e=p()(this,(t.__proto__||s()(t)).call(this));return e.camera=n,e.lastCenter=new v.l(0,0,0),e}return w()(t,n),u()(t,[{key:"resetStage",value:function(){this.remove.apply(this,o()(this.children)),this.add(new v.d(new v.b(2,.5,2),new v.f)),this.addCube()}},{key:"addCube",value:function(){var n=this,t=Math.random()>.5,e=4*Math.random()+3,i=this.children[this.children.length-1].position,o=new v.d(new v.b(2,.5,2),new v.f);t?o.position.copy(i).add(new v.l(0,0,-e)):o.position.copy(i).add(new v.l(-e,0,0)),this.add(o);var a=(this.lastCenter.clone(),this.lastCenter.clone(),o.position.clone(),o.position.clone().add(i).multiplyScalar(.5));this.lastCenter.copy(a);var s=(this.camera.position.clone(),this.camera.position.clone()),r=a.clone().add(new v.l(3,8,8));new f.Tween(s).to(r,500).onStart(function(){}).onUpdate(function(){n.camera.position.copy(s)}).start()}},{key:"getLastCubePosition",value:function(){return this.children[this.children.length-1].position}}]),t}(v.g));t.a=y}},["6sO2"]);
//# sourceMappingURL=index.5aa97fda2cd5eb7a3df9.js.map