{"version":3,"sources":["webpack:///static/js/index.5aa97fda2cd5eb7a3df9.js","webpack:///./src/index.ts","webpack:///./src/assist.ts","webpack:///./src/player.ts","webpack:///./src/gameStage.ts"],"names":["webpackJsonp","6sO2","module","__webpack_exports__","__webpack_require__","isInSquare","_ref","_ref2","x1","x","z1","z","x2","z2","Math","abs","retry","document","querySelector","classList","remove","gameStage","resetStage","player","reset","assistCircle","resetPosition","update","time","requestAnimationFrame","renderer","render","scene","camera","__WEBPACK_IMPORTED_MODULE_2__tweenjs_tween_js__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__index_less__","__WEBPACK_IMPORTED_MODULE_1_three__","n","__WEBPACK_IMPORTED_MODULE_3__player__","__WEBPACK_IMPORTED_MODULE_4__gameStage__","__WEBPACK_IMPORTED_MODULE_5__assist__","antialias","alpha","devicePixelRatio","window","innerWidth","innerHeight","rotation","set","color","PI","position","copy","add","setPixelRatio","setSize","body","appendChild","domElement","addEventListener","e","preventDefault","jumping","alive","setTarget","clone","getLastCubePosition","setY","sub","normalize","startCharge","running","stopCharge","endPoint","console","log","jumpByEndPosition","dead","addCube","call","then","isAlive","visible","deadAnimation","Q13Q","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_5_three__","Assist","_THREE$Mesh","geo","mat","this","_this","__proto__","targetDirection","distance","chargeDirection","startPosition","key","start","target","setLength","VKDx","exports","c9qc","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_6_three__","__WEBPACK_IMPORTED_MODULE_7__tweenjs_tween_js__","Player","_THREE$Object3D","points","bodyRound","bodyUp","bodyDown","y","head","tween","isToZ","initSpeed","_this2","flyDuration","startPoint","movePoint","multiplyScalar","to","onUpdate","t","length","sy","_this3","percent","pow","endPosition","onStart","_this4","a","resolve","reject","distanceTo","direction","onComplete","_this5","rtSL","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default","GameStage","lastCenter","apply","children","random","lastPosition","newCube","centerPoint","nowCameraPosition","endCameraPosition"],"mappings":"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","file":"static/js/index.5aa97fda2cd5eb7a3df9.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"6sO2\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index_less__ = __webpack_require__(\"VKDx\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index_less___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__index_less__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(\"Ml+6\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__tweenjs_tween_js__ = __webpack_require__(\"pXIW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__tweenjs_tween_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__tweenjs_tween_js__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__player__ = __webpack_require__(\"c9qc\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__gameStage__ = __webpack_require__(\"rtSL\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__assist__ = __webpack_require__(\"Q13Q\");\n\n\n\n\n\n\nvar renderer = new __WEBPACK_IMPORTED_MODULE_1_three__[\"m\" /* WebGLRenderer */]({ antialias: true, alpha: true, devicePixelRatio: window.devicePixelRatio });\nvar scene = new __WEBPACK_IMPORTED_MODULE_1_three__[\"i\" /* Scene */]();\nvar camera = new __WEBPACK_IMPORTED_MODULE_1_three__[\"h\" /* PerspectiveCamera */](70, window.innerWidth / window.innerHeight, 0.01, 1000);\ncamera.rotation.set(-0.7853981633974484, 0.25919993750092757, 0.2509060767339454);\nvar points = [new __WEBPACK_IMPORTED_MODULE_1_three__[\"k\" /* Vector2 */](0.2, 0), new __WEBPACK_IMPORTED_MODULE_1_three__[\"k\" /* Vector2 */](0.2, 1)];\nvar player = new __WEBPACK_IMPORTED_MODULE_3__player__[\"a\" /* default */]();\nvar gameStage = new __WEBPACK_IMPORTED_MODULE_4__gameStage__[\"a\" /* default */](camera);\ngameStage.resetStage();\nvar assistCircle = new __WEBPACK_IMPORTED_MODULE_5__assist__[\"a\" /* default */](new __WEBPACK_IMPORTED_MODULE_1_three__[\"a\" /* CircleGeometry */](0.2), new __WEBPACK_IMPORTED_MODULE_1_three__[\"e\" /* MeshBasicMaterial */]({ color: 0x000000 }));\nassistCircle.rotation.x = -Math.PI / 2;\nassistCircle.position.copy(player.position);\nscene.add(player, gameStage, assistCircle);\nrenderer.setPixelRatio(window.devicePixelRatio);\nrenderer.setSize(window.innerWidth, window.innerHeight);\ndocument.body.appendChild(renderer.domElement);\nrenderer.domElement.addEventListener('touchstart', function (e) {\n    e.preventDefault();\n    if (player.jumping || !player.alive) return;\n    assistCircle.setTarget(player.position.clone(), gameStage.getLastCubePosition().clone().setY(0.25).sub(player.position.clone()).normalize());\n    assistCircle.startCharge();\n});\nrenderer.domElement.addEventListener('touchend', function (e) {\n    e.preventDefault();\n    if (!assistCircle.running || !player.alive) return;\n    assistCircle.stopCharge();\n    var here = player.position;\n    var endPoint = assistCircle.position.clone();\n    console.log(gameStage);\n    player.jumpByEndPosition(endPoint, function () {\n        !isInSquare(gameStage.getLastCubePosition(), endPoint) && player.dead();\n        gameStage.addCube.call(gameStage);\n    }).then(function (isAlive) {\n        if (!isAlive) {\n            assistCircle.visible = false;\n            return player.deadAnimation();\n        }\n    }).then(function () {\n        console.log('complete');\n        if (!player.alive) {\n            document.querySelector('#retry-container').classList.add('show');\n        }\n    });\n});\nfunction isInSquare(_ref, _ref2) {\n    var x1 = _ref.x,\n        z1 = _ref.z;\n    var x2 = _ref2.x,\n        z2 = _ref2.z;\n\n    return Math.abs(x1 - x2) < 1 && Math.abs(z1 - z2) < 1;\n}\nfunction retry() {\n    document.querySelector('#retry-container').classList.remove('show');\n    gameStage.resetStage();\n    player.reset();\n    assistCircle.resetPosition();\n}\nfunction update(time) {\n    requestAnimationFrame(update);\n    renderer.render(scene, camera);\n    assistCircle.render();\n    __WEBPACK_IMPORTED_MODULE_2__tweenjs_tween_js__[\"update\"](time);\n}\nrequestAnimationFrame(update);\ndocument.querySelector('#retry-button').addEventListener('click', retry);\n\n/***/ }),\n\n/***/ \"Q13Q\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(\"Zx67\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(\"zwoO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(\"Pf15\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_three__ = __webpack_require__(\"Ml+6\");\n\n\n\n\n\n\n\nvar Assist = function (_THREE$Mesh) {\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Assist, _THREE$Mesh);\n\n    function Assist(geo, mat) {\n        __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, Assist);\n\n        var _this = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Assist.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Assist)).call(this, geo, mat));\n\n        _this.targetDirection = new __WEBPACK_IMPORTED_MODULE_5_three__[\"l\" /* Vector3 */](1, 0, 0);\n        _this.running = false;\n        _this.distance = 0;\n        _this.chargeDirection = 0.05;\n        _this.startPosition = _this.position.clone();\n        return _this;\n    }\n\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Assist, [{\n        key: 'setTarget',\n        value: function setTarget(start, target) {\n            this.startPosition.copy(start);\n            this.position.copy(start);\n            this.targetDirection.copy(target);\n        }\n    }, {\n        key: 'startCharge',\n        value: function startCharge() {\n            this.running = true;\n            this.distance = 1;\n        }\n    }, {\n        key: 'stopCharge',\n        value: function stopCharge() {\n            this.running = false;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (this.running) {\n                var position = this.startPosition.clone().add(this.targetDirection.setLength(this.distance));\n                this.position.copy(position);\n                this.distance += this.chargeDirection;\n            }\n        }\n    }, {\n        key: 'resetPosition',\n        value: function resetPosition() {\n            this.position.set(0, 0.25, 0);\n            this.visible = true;\n        }\n    }]);\n\n    return Assist;\n}(__WEBPACK_IMPORTED_MODULE_5_three__[\"d\" /* Mesh */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Assist);\n\n/***/ }),\n\n/***/ \"VKDx\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"c9qc\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(\"//Fk\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(\"Zx67\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(\"zwoO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__ = __webpack_require__(\"Pf15\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_three__ = __webpack_require__(\"Ml+6\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__tweenjs_tween_js__ = __webpack_require__(\"pXIW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__tweenjs_tween_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__tweenjs_tween_js__);\n\n\n\n\n\n\n\n\nvar GRAVITY = 20 / 1000;\nvar DURATION = 500;\n\nvar Player = function (_THREE$Object3D) {\n    __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(Player, _THREE$Object3D);\n\n    function Player() {\n        __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, Player);\n\n        var _this = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Player.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(Player)).call(this));\n\n        var body = new __WEBPACK_IMPORTED_MODULE_6_three__[\"g\" /* Object3D */]();\n        var points = [new __WEBPACK_IMPORTED_MODULE_6_three__[\"k\" /* Vector2 */](0.2, 0), new __WEBPACK_IMPORTED_MODULE_6_three__[\"k\" /* Vector2 */](0.13, 0.8), new __WEBPACK_IMPORTED_MODULE_6_three__[\"k\" /* Vector2 */](0.2, 1)];\n        var bodyRound = new __WEBPACK_IMPORTED_MODULE_6_three__[\"d\" /* Mesh */](new __WEBPACK_IMPORTED_MODULE_6_three__[\"c\" /* LatheGeometry */](points, 20), new __WEBPACK_IMPORTED_MODULE_6_three__[\"f\" /* MeshNormalMaterial */]());\n        var bodyUp = new __WEBPACK_IMPORTED_MODULE_6_three__[\"d\" /* Mesh */](new __WEBPACK_IMPORTED_MODULE_6_three__[\"a\" /* CircleGeometry */](0.2), new __WEBPACK_IMPORTED_MODULE_6_three__[\"f\" /* MeshNormalMaterial */]());\n        var bodyDown = new __WEBPACK_IMPORTED_MODULE_6_three__[\"d\" /* Mesh */](new __WEBPACK_IMPORTED_MODULE_6_three__[\"a\" /* CircleGeometry */](0.2), new __WEBPACK_IMPORTED_MODULE_6_three__[\"f\" /* MeshNormalMaterial */]());\n        bodyUp.rotation.x = -Math.PI / 2;\n        bodyUp.position.y = 1;\n        bodyDown.rotation.x = Math.PI / 2;\n        body.add(bodyUp, bodyDown, bodyRound);\n        var head = new __WEBPACK_IMPORTED_MODULE_6_three__[\"d\" /* Mesh */](new __WEBPACK_IMPORTED_MODULE_6_three__[\"j\" /* SphereGeometry */](0.2), new __WEBPACK_IMPORTED_MODULE_6_three__[\"f\" /* MeshNormalMaterial */]());\n        head.position.y = 1.2;\n        _this.add(head, body);\n        _this.position.y = 0.25;\n        _this.tween = null;\n        _this.jumping = false;\n        _this.alive = true;\n        return _this;\n    }\n\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(Player, [{\n        key: 'jumpBySpeed',\n        value: function jumpBySpeed(isToZ, initSpeed) {\n            var _this2 = this;\n\n            if (this.jumping) return;\n            var flyDuration = 2 * initSpeed / GRAVITY;\n            var startPoint = this.position.clone();\n            var movePoint = this.position.clone();\n            var endPoint = isToZ ? this.position.clone().sub(new __WEBPACK_IMPORTED_MODULE_6_three__[\"l\" /* Vector3 */](0, 0, initSpeed * flyDuration).multiplyScalar(1 / 1000)) : this.position.clone().sub(new __WEBPACK_IMPORTED_MODULE_6_three__[\"l\" /* Vector3 */](initSpeed * flyDuration, 0, 0).multiplyScalar(1 / 1000));\n            this.tween = new __WEBPACK_IMPORTED_MODULE_7__tweenjs_tween_js__[\"Tween\"](movePoint).to(endPoint, flyDuration).onUpdate(function () {\n                var t = movePoint.clone().sub(startPoint).length() / initSpeed * 1000;\n                var sy = (initSpeed * t - 0.5 * GRAVITY * t * t) / 1000 + 0.25;\n                _this2.position.copy(movePoint);\n                _this2.position.y = sy;\n                _this2.rotation[isToZ ? 'x' : 'z'] = Math.PI * 2 * t / flyDuration * (isToZ ? -1 : 1);\n            }).start();\n        }\n    }, {\n        key: 'jumpByDistance',\n        value: function jumpByDistance(isToZ, distance) {\n            var _this3 = this;\n\n            if (this.jumping) return;\n            var startPoint = this.position.clone();\n            var movePoint = this.position.clone();\n            var endPoint = isToZ ? this.position.clone().sub(new __WEBPACK_IMPORTED_MODULE_6_three__[\"l\" /* Vector3 */](0, 0, distance)) : this.position.clone().sub(new __WEBPACK_IMPORTED_MODULE_6_three__[\"l\" /* Vector3 */](distance, 0, 0));\n            this.tween = new __WEBPACK_IMPORTED_MODULE_7__tweenjs_tween_js__[\"Tween\"](movePoint).to(endPoint, DURATION).onUpdate(function () {\n                var percent = movePoint.clone().sub(startPoint).length() / distance;\n                _this3.position.copy(movePoint);\n                var sy = -12 * Math.pow(percent - 0.5, 2) + 3.25;\n                _this3.position.y = sy;\n                _this3.rotation[isToZ ? 'x' : 'z'] = Math.PI * 2 * percent * (isToZ ? -1 : 1);\n            }).start();\n        }\n    }, {\n        key: 'jumpByEndPosition',\n        value: function jumpByEndPosition(endPosition, onStart) {\n            var _this4 = this;\n\n            if (this.jumping) return;\n            return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n                var startPoint = _this4.position.clone();\n                var movePoint = _this4.position.clone();\n                var endPoint = endPosition;\n                var distance = endPoint.clone().distanceTo(startPoint);\n                var direction = endPoint.clone().sub(startPoint).normalize();\n                var isToZ = Math.abs(direction.z) > Math.abs(direction.x);\n                _this4.tween = new __WEBPACK_IMPORTED_MODULE_7__tweenjs_tween_js__[\"Tween\"](movePoint).to(endPoint, DURATION).onStart(function () {\n                    _this4.jumping = true;\n                    onStart();\n                }).onUpdate(function () {\n                    var percent = movePoint.clone().sub(startPoint).length() / distance;\n                    _this4.position.copy(movePoint);\n                    var sy = -12 * Math.pow(percent - 0.5, 2) + 3.25;\n                    _this4.position.y = sy;\n                    _this4.rotation[isToZ ? 'x' : 'z'] = Math.PI * 2 * percent * (isToZ ? -1 : 1);\n                }).onComplete(function () {\n                    _this4.jumping = false;\n                    resolve(_this4.alive);\n                }).start();\n            });\n        }\n    }, {\n        key: 'dead',\n        value: function dead() {\n            this.alive = false;\n        }\n    }, {\n        key: 'deadAnimation',\n        value: function deadAnimation() {\n            var _this5 = this;\n\n            return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n                var startRotation = _this5.rotation.clone();\n                var tween = new __WEBPACK_IMPORTED_MODULE_7__tweenjs_tween_js__[\"Tween\"](_this5.position).to(new __WEBPACK_IMPORTED_MODULE_6_three__[\"l\" /* Vector3 */](_this5.position.x, -0.25, _this5.position.z), 1000).onComplete(function () {\n                    resolve();\n                }).start();\n            });\n        }\n    }, {\n        key: 'reset',\n        value: function reset() {\n            this.alive = true;\n            this.position.set(0, 0.25, 0);\n        }\n    }]);\n\n    return Player;\n}(__WEBPACK_IMPORTED_MODULE_6_three__[\"g\" /* Object3D */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Player);\n\n/***/ }),\n\n/***/ \"rtSL\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray__ = __webpack_require__(\"Gu7T\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(\"Zx67\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(\"zwoO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__ = __webpack_require__(\"Pf15\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_three__ = __webpack_require__(\"Ml+6\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__tweenjs_tween_js__ = __webpack_require__(\"pXIW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__tweenjs_tween_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__tweenjs_tween_js__);\n\n\n\n\n\n\n\n\n\n\nvar GameStage = function (_THREE$Object3D) {\n    __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(GameStage, _THREE$Object3D);\n\n    function GameStage(camera) {\n        __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, GameStage);\n\n        var _this = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this, (GameStage.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(GameStage)).call(this));\n\n        _this.camera = camera;\n        _this.lastCenter = new __WEBPACK_IMPORTED_MODULE_6_three__[\"l\" /* Vector3 */](0, 0, 0);\n        return _this;\n    }\n\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(GameStage, [{\n        key: 'resetStage',\n        value: function resetStage() {\n            this.remove.apply(this, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default()(this.children));\n            this.add(new __WEBPACK_IMPORTED_MODULE_6_three__[\"d\" /* Mesh */](new __WEBPACK_IMPORTED_MODULE_6_three__[\"b\" /* CubeGeometry */](2, 0.5, 2), new __WEBPACK_IMPORTED_MODULE_6_three__[\"f\" /* MeshNormalMaterial */]()));\n            this.addCube();\n        }\n    }, {\n        key: 'addCube',\n        value: function addCube() {\n            var _this2 = this;\n\n            var isToZ = Math.random() > 0.5;\n            var distance = Math.random() * 4 + 3;\n            var lastPosition = this.children[this.children.length - 1].position;\n            var newCube = new __WEBPACK_IMPORTED_MODULE_6_three__[\"d\" /* Mesh */](new __WEBPACK_IMPORTED_MODULE_6_three__[\"b\" /* CubeGeometry */](2, 0.5, 2), new __WEBPACK_IMPORTED_MODULE_6_three__[\"f\" /* MeshNormalMaterial */]());\n            if (isToZ) {\n                newCube.position.copy(lastPosition).add(new __WEBPACK_IMPORTED_MODULE_6_three__[\"l\" /* Vector3 */](0, 0, -distance));\n            } else {\n                newCube.position.copy(lastPosition).add(new __WEBPACK_IMPORTED_MODULE_6_three__[\"l\" /* Vector3 */](-distance, 0, 0));\n            }\n            this.add(newCube);\n            var startCubePosition = this.lastCenter.clone();\n            var nowCubePosition = this.lastCenter.clone();\n            var endCubePosition = newCube.position.clone();\n            var centerPoint = newCube.position.clone().add(lastPosition).multiplyScalar(0.5);\n            this.lastCenter.copy(centerPoint);\n            var startCameraPosition = this.camera.position.clone();\n            var nowCameraPosition = this.camera.position.clone();\n            var endCameraPosition = centerPoint.clone().add(new __WEBPACK_IMPORTED_MODULE_6_three__[\"l\" /* Vector3 */](3, 8, 8));\n            var cameraTeen = new __WEBPACK_IMPORTED_MODULE_7__tweenjs_tween_js__[\"Tween\"](nowCameraPosition).to(endCameraPosition, 500).onStart(function () {}).onUpdate(function () {\n                _this2.camera.position.copy(nowCameraPosition);\n            }).start();\n        }\n    }, {\n        key: 'getLastCubePosition',\n        value: function getLastCubePosition() {\n            return this.children[this.children.length - 1].position;\n        }\n    }]);\n\n    return GameStage;\n}(__WEBPACK_IMPORTED_MODULE_6_three__[\"g\" /* Object3D */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GameStage);\n\n/***/ })\n\n},[\"6sO2\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/index.5aa97fda2cd5eb7a3df9.js","import './index.less';\nimport * as THREE from 'three';\nimport * as TWEEN from '@tweenjs/tween.js';\nimport Player from './player';\nimport GameStage from './gameStage';\nimport Assist from './assist';\nimport { assertLogicalExpression } from 'babel-types';\n\nconst renderer: THREE.WebGLRenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true, devicePixelRatio: window.devicePixelRatio });\nconst scene: THREE.Scene = new THREE.Scene();\nconst camera: THREE.PerspectiveCamera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.01, 1000);\ncamera.rotation.set(-0.7853981633974484, 0.25919993750092757, 0.2509060767339454);\n\nlet points: THREE.Vector2[] = [new THREE.Vector2(0.2, 0), new THREE.Vector2(0.2, 1)];\n\nconst player: Player = new Player();\n\nconst gameStage: GameStage = new GameStage(camera);\n\ngameStage.resetStage();\n\nconst assistCircle = new Assist(new THREE.CircleGeometry(0.2), new THREE.MeshBasicMaterial({ color: 0x000000 }));\nassistCircle.rotation.x = -Math.PI / 2;\nassistCircle.position.copy(player.position);\n\nscene.add(player, gameStage, assistCircle);\n\nrenderer.setPixelRatio(window.devicePixelRatio);\nrenderer.setSize(window.innerWidth, window.innerHeight);\n\ndocument.body.appendChild(renderer.domElement);\n\nrenderer.domElement.addEventListener('touchstart', function(e) {\n    e.preventDefault();\n    if (player.jumping || !player.alive) return;\n\n    assistCircle.setTarget(\n        player.position.clone(),\n        gameStage\n            .getLastCubePosition()\n            .clone()\n            .setY(0.25)\n            .sub(player.position.clone())\n            .normalize()\n    );\n    assistCircle.startCharge();\n});\n\nrenderer.domElement.addEventListener('touchend', function(e) {\n    e.preventDefault();\n    if (!assistCircle.running || !player.alive) return;\n\n    assistCircle.stopCharge();\n    const here = player.position;\n    const endPoint = assistCircle.position.clone();\n\n    console.log(gameStage);\n    player\n        .jumpByEndPosition(endPoint, () => {\n            !isInSquare(gameStage.getLastCubePosition(), endPoint) && player.dead();\n            gameStage.addCube.call(gameStage);\n        })\n        .then(isAlive => {\n            if (!isAlive) {\n                assistCircle.visible = false;\n                return player.deadAnimation();\n            }\n        })\n        .then(() => {\n            console.log('complete');\n            if (!player.alive) {\n                document.querySelector('#retry-container').classList.add('show');\n            }\n        });\n});\n\nfunction isInSquare({ x: x1, z: z1 }: THREE.Vector3, { x: x2, z: z2 }: THREE.Vector3) {\n    return Math.abs(x1 - x2) < 1 && Math.abs(z1 - z2) < 1;\n}\n\nfunction retry() {\n    document.querySelector('#retry-container').classList.remove('show');\n    gameStage.resetStage();\n    player.reset();\n    assistCircle.resetPosition();\n}\n\nfunction update(time: number): void {\n    requestAnimationFrame(update);\n    renderer.render(scene, camera);\n    assistCircle.render();\n    TWEEN.update(time);\n}\n\nrequestAnimationFrame(update);\n\ndocument.querySelector('#retry-button').addEventListener('click', retry);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import * as THREE from 'three';\n\nexport default class Assist extends THREE.Mesh {\n    startPosition: THREE.Vector3;\n    targetDirection: THREE.Vector3;\n    running: boolean;\n    distance: number;\n    chargeDirection: number;\n\n    constructor(geo: THREE.Geometry, mat: THREE.Material) {\n        super(geo, mat);\n\n        this.targetDirection = new THREE.Vector3(1, 0, 0);\n        this.running = false;\n        this.distance = 0;\n        this.chargeDirection = 0.05;\n        this.startPosition = this.position.clone();\n    }\n\n    setTarget(start: THREE.Vector3, target: THREE.Vector3) {\n        this.startPosition.copy(start);\n        this.position.copy(start);\n        this.targetDirection.copy(target);\n    }\n\n    startCharge() {\n        this.running = true;\n        this.distance = 1;\n    }\n\n    stopCharge() {\n        this.running = false;\n    }\n\n    render() {\n        if (this.running) {\n            const position = this.startPosition.clone().add(this.targetDirection.setLength(this.distance));\n            this.position.copy(position);\n            this.distance += this.chargeDirection;\n        }\n    }\n\n    resetPosition() {\n        this.position.set(0, 0.25, 0);\n        this.visible = true;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/assist.ts","import * as THREE from 'three';\nimport * as TWEEN from '@tweenjs/tween.js';\n\nconst GRAVITY = 20 / 1000;\nconst DURATION = 500;\n\nexport default class Player extends THREE.Object3D {\n    tween: TWEEN.Tween;\n    jumping: boolean;\n    alive: boolean;\n\n    constructor() {\n        super();\n\n        const body: THREE.Object3D = new THREE.Object3D();\n        const points: THREE.Vector2[] = [new THREE.Vector2(0.2, 0), new THREE.Vector2(0.13, 0.8), new THREE.Vector2(0.2, 1)];\n        const bodyRound: THREE.Mesh = new THREE.Mesh(new THREE.LatheGeometry(points, 20), new THREE.MeshNormalMaterial());\n        const bodyUp: THREE.Mesh = new THREE.Mesh(new THREE.CircleGeometry(0.2), new THREE.MeshNormalMaterial());\n        const bodyDown: THREE.Mesh = new THREE.Mesh(new THREE.CircleGeometry(0.2), new THREE.MeshNormalMaterial());\n        bodyUp.rotation.x = -Math.PI / 2;\n        bodyUp.position.y = 1;\n        bodyDown.rotation.x = Math.PI / 2;\n        body.add(bodyUp, bodyDown, bodyRound);\n\n        const head: THREE.Mesh = new THREE.Mesh(new THREE.SphereGeometry(0.2), new THREE.MeshNormalMaterial());\n        head.position.y = 1.2;\n        this.add(head, body);\n        this.position.y = 0.25;\n\n        this.tween = null;\n        this.jumping = false;\n        this.alive = true;\n    }\n\n    jumpBySpeed(isToZ: boolean, initSpeed: number) {\n        if (this.jumping) return;\n\n        const flyDuration = 2 * initSpeed / GRAVITY;\n\n        const startPoint = this.position.clone();\n        const movePoint = this.position.clone();\n        const endPoint: THREE.Vector3 = isToZ\n            ? this.position.clone().sub(new THREE.Vector3(0, 0, initSpeed * flyDuration).multiplyScalar(1 / 1000))\n            : this.position.clone().sub(new THREE.Vector3(initSpeed * flyDuration, 0, 0).multiplyScalar(1 / 1000));\n\n        this.tween = new TWEEN.Tween(movePoint)\n            .to(endPoint, flyDuration)\n            .onUpdate(() => {\n                let t =\n                    movePoint\n                        .clone()\n                        .sub(startPoint)\n                        .length() /\n                    initSpeed *\n                    1000;\n                let sy = (initSpeed * t - 0.5 * GRAVITY * t * t) / 1000 + 0.25;\n                this.position.copy(movePoint);\n                this.position.y = sy;\n                this.rotation[isToZ ? 'x' : 'z'] = Math.PI * 2 * t / flyDuration * (isToZ ? -1 : 1);\n            })\n            .start();\n    }\n\n    jumpByDistance(isToZ: boolean, distance: number) {\n        if (this.jumping) return;\n\n        const startPoint = this.position.clone();\n        const movePoint = this.position.clone();\n        const endPoint = isToZ\n            ? this.position.clone().sub(new THREE.Vector3(0, 0, distance))\n            : this.position.clone().sub(new THREE.Vector3(distance, 0, 0));\n\n        this.tween = new TWEEN.Tween(movePoint)\n            .to(endPoint, DURATION)\n            .onUpdate(() => {\n                let percent =\n                    movePoint\n                        .clone()\n                        .sub(startPoint)\n                        .length() / distance;\n                this.position.copy(movePoint);\n                let sy = -12 * Math.pow(percent - 0.5, 2) + 3.25;\n                this.position.y = sy;\n                this.rotation[isToZ ? 'x' : 'z'] = Math.PI * 2 * percent * (isToZ ? -1 : 1);\n            })\n            .start();\n    }\n\n    jumpByEndPosition(endPosition: THREE.Vector3, onStart: () => void) {\n        if (this.jumping) return;\n        return new Promise((resolve, reject) => {\n            const startPoint = this.position.clone();\n            const movePoint = this.position.clone();\n            const endPoint = endPosition;\n            const distance = endPoint.clone().distanceTo(startPoint);\n            const direction = endPoint\n                .clone()\n                .sub(startPoint)\n                .normalize();\n            const isToZ = Math.abs(direction.z) > Math.abs(direction.x);\n\n            this.tween = new TWEEN.Tween(movePoint)\n                .to(endPoint, DURATION)\n                .onStart(() => {\n                    this.jumping = true;\n                    onStart();\n                })\n                .onUpdate(() => {\n                    let percent =\n                        movePoint\n                            .clone()\n                            .sub(startPoint)\n                            .length() / distance;\n                    this.position.copy(movePoint);\n                    let sy = -12 * Math.pow(percent - 0.5, 2) + 3.25;\n                    this.position.y = sy;\n                    this.rotation[isToZ ? 'x' : 'z'] = Math.PI * 2 * percent * (isToZ ? -1 : 1);\n                })\n                .onComplete(() => {\n                    this.jumping = false;\n                    resolve(this.alive);\n                })\n                .start();\n        });\n    }\n\n    dead() {\n        this.alive = false;\n    }\n\n    deadAnimation() {\n        return new Promise((resolve, reject) => {\n            const startRotation = this.rotation.clone();\n            const tween = new TWEEN.Tween(this.position)\n                .to(new THREE.Vector3(this.position.x, -0.25, this.position.z), 1000)\n                .onComplete(() => {\n                    resolve();\n                })\n                .start();\n        });\n    }\n\n    reset() {\n        this.alive = true;\n        this.position.set(0, 0.25, 0);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/player.ts","import * as THREE from 'three';\nimport * as TWEEN from '@tweenjs/tween.js';\nimport { Vector2, Vector3 } from 'three';\n\nexport default class GameStage extends THREE.Object3D {\n    camera: THREE.Camera;\n    lastCenter: THREE.Vector3;\n    tween: TWEEN.Tween;\n\n    constructor(camera: THREE.Camera) {\n        super();\n\n        this.camera = camera;\n        this.lastCenter = new Vector3(0, 0, 0);\n    }\n\n    resetStage() {\n        this.remove(...this.children);\n        this.add(new THREE.Mesh(new THREE.CubeGeometry(2, 0.5, 2), new THREE.MeshNormalMaterial()));\n        this.addCube();\n    }\n\n    addCube() {\n        const isToZ: boolean = Math.random() > 0.5;\n        const distance: number = Math.random() * 4 + 3;\n        const lastPosition: THREE.Vector3 = this.children[this.children.length - 1].position;\n        const newCube: THREE.Mesh = new THREE.Mesh(new THREE.CubeGeometry(2, 0.5, 2), new THREE.MeshNormalMaterial());\n        if (isToZ) {\n            newCube.position.copy(lastPosition).add(new THREE.Vector3(0, 0, -distance));\n        } else {\n            newCube.position.copy(lastPosition).add(new THREE.Vector3(-distance, 0, 0));\n        }\n\n        this.add(newCube);\n\n        const startCubePosition = this.lastCenter.clone();\n        const nowCubePosition = this.lastCenter.clone();\n        const endCubePosition = newCube.position.clone();\n\n        // const lookAtTween = new TWEEN.Tween(nowCubePosition)\n        //     .to(endCubePosition, 500)\n        //     .onStart(() => {})\n        //     .onUpdate(() => {\n        //         const centerPoint = startCubePosition\n        //             .clone()\n        //             .add(nowCubePosition)\n        //             .multiplyScalar(0.5);\n        //         this.camera.lookAt(centerPoint);\n        //     })\n        //     .onComplete(() => {})\n        //     .start();\n\n        const centerPoint = newCube.position\n            .clone()\n            .add(lastPosition)\n            .multiplyScalar(0.5);\n        this.lastCenter.copy(centerPoint);\n        const startCameraPosition = this.camera.position.clone();\n        const nowCameraPosition = this.camera.position.clone();\n        const endCameraPosition = centerPoint.clone().add(new THREE.Vector3(3, 8, 8));\n        const cameraTeen = new TWEEN.Tween(nowCameraPosition)\n            .to(endCameraPosition, 500)\n            .onStart(() => {})\n            .onUpdate(() => {\n                this.camera.position.copy(nowCameraPosition);\n            })\n            .start();\n    }\n\n    getLastCubePosition() {\n        return this.children[this.children.length - 1].position;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameStage.ts"],"sourceRoot":""}